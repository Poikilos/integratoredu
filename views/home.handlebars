<!-- views/home.handlebars -->
{{#if user}}
<div class="container-fluid" style="width:100%">
	{{#if section}}
        {{#createGroupContains section user.username}}
        {{#if_is_any_form_mode mode}}
        {{get_section_form section mode user.username prefill missing_fields}}
        {{/if_is_any_form_mode}}
        {{/createGroupContains}}
		{{#readGroupContains section user.username}}
		{{#isOnlyEmployeeReadSection section}}
		<div style="size:.8em; color:darkgray">Permission to view {{section}} history should only be given to employees.
		</div>
		{{/isOnlyEmployeeReadSection}}
	{{else}}
		{{#modifyGroupContains section user.username}}
		{{#isOnlyEmployeeModifySection section}}
		<div style="size:.8em; color:darkgray">Permission to modify {{section}} should only be given to employees.
		</div>
		{{/isOnlyEmployeeModifySection}}
		{{/modifyGroupContains}}
		{{/readGroupContains}}
	{{/if}}
	<div style="width:100%; text-align:right">
	</div>
	{{#if_eq mode "read"}}
	<div class="panel panel-default">
		
		<div class="panel-body">
	<table style="width:100%">
	<tr>
	<td style="width:5%; vertical-align:top; horizontal-align:left">
		<br/>
		<br/>
		<br/>
		<br/>
			<div>Year: 
		{{#each years}}
		<form action="{{get_proxy_prefix_then_slash}}" method="get">
		<input type="hidden" name="section" id="section" value="{{@root.section}}"/>
		<input type="hidden" name="selected_year" id="selected_year" value="{{this}}" />
		<input type="hidden" name="selected_month" id="selected_month" value="(none)" />
		<input type="hidden" name="selected_day" id="selected_day" value="(none)" />
		<input type="hidden" name="selected_item_key" id="selected_item_key" value="(none)" />
		{{#if_eq this @root.selected_year}}
		<input class="btn" type="submit" value="{{this}}" />
		{{else}}
		<input class="btn btn-default" type="submit" value="{{this}}" />
		{{/if_eq}}
		</form>
		{{/each}}
			</div>
			<div>Month:
		{{#each months}}
		<form action="{{get_proxy_prefix_then_slash}}" method="get">
		<input type="hidden" name="section" id="section" value="{{@root.section}}"/>
		<input type="hidden" name="selected_year" id="selected_year" value="{{@root.selected_year}}" />
		<input type="hidden" name="selected_month" id="selected_month" value="{{this}}" />
		<input type="hidden" name="selected_day" id="selected_day" value="(none)" />
		<input type="hidden" name="selected_item_key" id="selected_item_key" value="(none)" />
		{{#if_eq this @root.selected_month}}
		<input class="btn" type="submit" value="{{this}}" />
		{{else}}
		<input class="btn btn-default" type="submit" value="{{this}}" />
		{{/if_eq}}
		</form>
		{{/each}}
			</div>
			<div>Day:
		{{#each days}}
		<form action="{{get_proxy_prefix_then_slash}}" method="get">
		<input type="hidden" name="section" id="section" value="{{@root.section}}"/>
		<input type="hidden" name="selected_year" id="selected_year" value="{{@root.selected_year}}" />
		<input type="hidden" name="selected_month" id="selected_month" value="{{@root.selected_month}}" />
		<input type="hidden" name="selected_day" id="selected_day" value="{{this}}" />
		<input type="hidden" name="selected_item_key" id="selected_item_key" value="(none)" />
		{{#if_eq this @root.selected_day}}
		<input class="btn" type="submit" value="{{this}}" />
		{{else}}
		<input class="btn btn-default" type="submit" value="{{this}}" />
		{{/if_eq}}
		</form>
		{{/each}}
			</div>
		
	</td>
	<td style="vertical-align:top; horizontal-align:left">
			<div style="width:100%; text-align:center">
	<br/>
		<nav class="navbar navbar-light bg-faded" style="font-weight:bold">
		<span> {{selected_year}}</span>
		<span> {{selected_month}}</span>
		<span> {{selected_day}}</span>
		{{#if selected_day}}
		{{else}}
			{{#if_eq section "commute"}}
				{{#if selected_month}}
				&nbsp;(select a day)
				{{else}}
				&nbsp;(select a month)
				{{/if}}
			{{else}}
			(click commute above to list entries)
			{{/if_eq}}
		{{/if}}
		</nav>
			</div>
		{{show_history section objects}}
	</td>
	</tr>
	</table>{{!--end read container table which has two columns: selectors in left, data in right--}}
	<p></p>
		<!--<p>Avatar: <img src="{{user.avatar}}"/></p>-->
		</div>{{!--end panel-body which contains div for each type of selector--}}
	</div>{{!--end panel panel-default which contains read container table and all other read features--}}
	{{/if_eq}} {{!--end if mode is read--}}

	{{#if_eq mode "reports"}}
	{{show_reports section user.username years months days selected_year selected_month selected_day section_report_edit_field}}
	{{/if_eq}} {{!--end if mode is report--}}
	{{#if_eq mode "settings"}}<strong>Settings:</strong><br/>
	{{show_settings section user.username selected_setting}}
	{{/if_eq}} {{!--end if mode is settings--}}
	
	<br/>
	</div><!--end outer box-->
	
{{else}}
<div class="jumbotron">
	<h1>IntegratorEdu</h1>
	<p>Log in as known user to view and add information.</p>
	<p>
		<a href="{{get_proxy_prefix_then_slash}}login" class="btn btn-primary btn-lg" role="button">
		<span class="glyphicon glyphicon-user"></span>
		Log In
		</a>
	</p>
</div>
{{/if}}
