<!-- views/home.handlebars -->
<!--this whole handlebars object is already in a container-->
{{#if user}}
	{{#if section}}
        {{#createGroupContains section user.username}}
        {{#if_is_any_form_mode mode}}
        {{get_section_form section mode user.username prefill missing_fields}}
        {{/if_is_any_form_mode}}
        {{/createGroupContains}}
		{{#readGroupContains section user.username}}
		{{#isOnlyEmployeeReadSection section}}
		<div style="size:.8em; color:darkgray">Permission to view {{section}} history should only be given to employees.
		</div>
		{{/isOnlyEmployeeReadSection}}
	{{else}}
		{{#modifyGroupContains section user.username}}
		{{#isOnlyEmployeeModifySection section}}
		<div style="size:.8em; color:darkgray">Permission to modify {{section}} should only be given to employees.
		</div>
		{{/isOnlyEmployeeModifySection}}
		{{/modifyGroupContains}}
		{{/readGroupContains}}
	{{/if}}
	{{#if_eq mode "read"}}
	<div class="row">
		{{!--hidden-print is only in bootstrap versions before  4.0.0--}}
		<div class="col-sm-2 d-print-none hidden-print">
			<br/>
			<br/>
			<br/>
			<br/>
			<div>Year: 
			{{#each years}}
			<form action="{{get_proxy_prefix_then_slash}}" method="get">
			<input type="hidden" name="section" id="section" value="{{@root.section}}"/>
			<input type="hidden" name="selected_year" id="selected_year" value="{{this}}" />
			<input type="hidden" name="selected_month" id="selected_month" value="(none)" />
			<input type="hidden" name="selected_day" id="selected_day" value="(none)" />
			<input type="hidden" name="selected_item_key" id="selected_item_key" value="(none)" />
			{{#if_eq this @root.selected_year}}
			<input class="btn" type="submit" value="{{this}}" />
			{{else}}
			<input class="btn btn-default" type="submit" value="{{this}}" />
			{{/if_eq}}
			</form>
			
			{{/each}}
			</div>
			<div>Month:
			{{#each months}}
			<form action="{{get_proxy_prefix_then_slash}}" method="get">
			<input type="hidden" name="section" id="section" value="{{@root.section}}"/>
			<input type="hidden" name="selected_year" id="selected_year" value="{{@root.selected_year}}" />
			<input type="hidden" name="selected_month" id="selected_month" value="{{this}}" />
			<input type="hidden" name="selected_day" id="selected_day" value="(none)" />
			<input type="hidden" name="selected_item_key" id="selected_item_key" value="(none)" />
			{{#if_eq this @root.selected_month}}
			<input class="btn" type="submit" value="{{this}}" />
			{{else}}
			<input class="btn btn-default" type="submit" value="{{this}}" />
			{{/if_eq}}
			</form>
			{{/each}}
			</div>
			<div>Day:
			{{#each days}}
			<form action="{{get_proxy_prefix_then_slash}}" method="get">
			<input type="hidden" name="section" id="section" value="{{@root.section}}"/>
			<input type="hidden" name="selected_year" id="selected_year" value="{{@root.selected_year}}" />
			<input type="hidden" name="selected_month" id="selected_month" value="{{@root.selected_month}}" />
			<input type="hidden" name="selected_day" id="selected_day" value="{{this}}" />
			<input type="hidden" name="selected_item_key" id="selected_item_key" value="(none)" />
			{{#if_eq this @root.selected_day}}
			<input class="btn" type="submit" value="{{this}}" />
			{{else}}
			<input class="btn btn-default" type="submit" value="{{this}}" />
			{{/if_eq}}
			</form>
			{{/each}}
			</div>
			
		</div><!--end col-sm-->
		<div class="col-sm-10" align="center">
			<br/>
				<div class="" style="font-weight:bold">
				<span> {{selected_year}}</span>
				<span> {{selected_month}}</span>
				<span> {{selected_day}}</span>
				{{#if selected_day}}
				{{else}}
					{{#if_eq section "commute"}}
						{{#if selected_month}}
						&nbsp;(select a day)
						{{else}}
						&nbsp;(select a month)
						{{/if}}
					{{else}}
					(click commute above to list entries)
					{{/if_eq}}
				{{/if}}
				</div>
			{{show_history section objects}}
		</div><!--end col-sm-->
	</div><!--end row-->
	<div class="row">
		<div class="col-sm-2">
	{{!--end read area which has two columns: selectors in left, data in right--}}
			<!--<p>Avatar: <img src="{{user.avatar}}"/></p>-->
	{{/if_eq}} {{!--end if mode is read--}}

	{{#if_eq mode "reports"}}
	{{show_reports "false" section user.username years months days selected_year selected_month selected_day selected_number section_report_edit_field}}
	{{show_billing_cycle_preview section user.username selected_number}}
	{{/if_eq}} {{!--end if mode is reports--}}
	
	{{#if_eq mode "settings"}}<strong>Settings:</strong><br/>
	{{show_settings section user.username selected_setting}}
	{{/if_eq}} {{!--end if mode is settings--}}
		
		<br/>
		</div>
	</div><!--end row-->
	
{{else}}
<div class="jumbotron">
	<h1>IntegratorEdu</h1>
	<p>Log in as known user to view and add information.</p>
	<p>
		<a href="{{get_proxy_prefix_then_slash}}login" class="btn btn-primary btn-lg" role="button">
		<span class="glyphicon glyphicon-user"></span>
		Log In
		</a>
	</p>
</div>
{{/if}}
<!--this whole handlebars object is already in a container-->
